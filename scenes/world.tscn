[gd_scene load_steps=45 format=3 uid="uid://bc2uxg0f8xtlv"]

[ext_resource type="Script" path="res://scripts/drag_window.gd" id="1_6xk3g"]
[ext_resource type="Texture2D" uid="uid://co23j6v2y71vg" path="res://art/Screen.png" id="1_plqb4"]
[ext_resource type="Texture2D" uid="uid://cei0m85yv5wys" path="res://art/Body.png" id="2_lv3vw"]
[ext_resource type="Texture2D" uid="uid://d3vwtbyyaq4x7" path="res://art/states/LoudInnerThoughtsIcon.png" id="2_ufgsa"]
[ext_resource type="Texture2D" uid="uid://b23m3shn5wti3" path="res://art/states/OverwhelmedIcon.png" id="3_48uuk"]
[ext_resource type="Script" path="res://scripts/states_menu.gd" id="3_hysu4"]
[ext_resource type="Texture2D" uid="uid://dr70k252vnvgn" path="res://art/ButtonReleased.png" id="3_o1wkp"]
[ext_resource type="Texture2D" uid="uid://bvnljqs50ubku" path="res://art/states/FearOfDeathIcon.png" id="4_8u0cd"]
[ext_resource type="Shader" path="res://shaders/progress_bar.gdshader" id="4_xrqwi"]
[ext_resource type="Texture2D" uid="uid://cvqdgurgg1hkw" path="res://art/ButtonPressed.png" id="4_yorv4"]
[ext_resource type="Texture2D" uid="uid://biov067vi24yo" path="res://art/RightReleased.png" id="6_1xujt"]
[ext_resource type="Script" path="res://scripts/action_menu.gd" id="6_p1swq"]
[ext_resource type="Texture2D" uid="uid://df7ham40ijue7" path="res://art/resize.png" id="6_xv50p"]
[ext_resource type="Texture2D" uid="uid://ca0wwwjw1xx48" path="res://art/actions/WaxHeadsIcon.png" id="6_ykrpd"]
[ext_resource type="Script" path="res://Scripts/resize.gd" id="7_ci1wg"]
[ext_resource type="Texture2D" uid="uid://dj0ol724jg74c" path="res://art/actions/WindowIcon.png" id="7_in6r8"]
[ext_resource type="Texture2D" uid="uid://dnorbd6idfxas" path="res://art/RightPressed.png" id="7_q3rti"]
[ext_resource type="Texture2D" uid="uid://cepdrxd6nsqif" path="res://art/LeftReleased.png" id="8_mfe73"]
[ext_resource type="Texture2D" uid="uid://l1tqr7wfjfyg" path="res://art/actions/ListenMusicIcon.png" id="8_vvdv8"]
[ext_resource type="Texture2D" uid="uid://cpsukwc0sdimj" path="res://art/LeftPressed.png" id="9_gf4wo"]
[ext_resource type="Texture2D" uid="uid://daruhju1e8qfs" path="res://art/actions/ComplimentIcon.png" id="12_2joox"]
[ext_resource type="Texture2D" uid="uid://nta6cuic168r" path="res://art/animations/Idle.png" id="19_dllgi"]
[ext_resource type="Script" path="res://scripts/existentialgotchi.gd" id="20_iy2gj"]
[ext_resource type="Texture2D" uid="uid://dcrn6d378tb8v" path="res://art/animations/ListenMusic.png" id="20_l3r3b"]
[ext_resource type="Texture2D" uid="uid://cyg81h0t2a0c7" path="res://art/animations/PlayWaxHeads.png" id="22_0ntd1"]
[ext_resource type="Texture2D" uid="uid://3w8tkfl6fh7b" path="res://art/animations/ComplimentAnim.png" id="22_pdqil"]
[ext_resource type="Texture2D" uid="uid://wudcloigy274" path="res://art/animations/LookOutWindow.png" id="22_ukfqp"]
[ext_resource type="Texture2D" uid="uid://dsf113247hcgm" path="res://art/animations/FearDeath.png" id="23_r513t"]
[ext_resource type="Texture2D" uid="uid://birv8pakp0pvb" path="res://art/animations/InnerThoughts.png" id="24_7ii7x"]
[ext_resource type="Texture2D" uid="uid://dyd7j1vi5bh8t" path="res://art/animations/FearDeath2.png" id="24_t04sq"]
[ext_resource type="Texture2D" uid="uid://bi5me3slc2sfo" path="res://art/animations/InnerThoughts2.png" id="25_ka4jr"]
[ext_resource type="Texture2D" uid="uid://b7cf6qncnnbcr" path="res://art/animations/Overwhelmed.png" id="28_pkvg3"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_nqr0b"]
shader = ExtResource("4_xrqwi")
shader_parameter/min_val = null
shader_parameter/current_val = 0.0
shader_parameter/max_val = 10.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_nd57g"]
shader = ExtResource("4_xrqwi")
shader_parameter/min_val = null
shader_parameter/current_val = 0.0
shader_parameter/max_val = 10.0

[sub_resource type="Shader" id="Shader_g6oqu"]
code = "shader_type canvas_item;

uniform float min_val;
uniform float current_val;
uniform float max_val;

/*
	linear normalization from one range to another
*/
float linear(float old_min, float old_max, float new_min, float new_max, float current) {
	float old_range = (old_max - old_min);
	float new_range = (new_max - new_min);
	float new_val = (((current - old_min) * new_range) / old_range ) + new_min;
	return new_val;
}

void fragment() {
	vec4 color = COLOR;
	
	float normalized = linear(max_val, min_val, 0.0, 1.0, current_val);
	
	/*
	If the fragcoord.x is less than or equal to the calculated point
	between min and max that current_value falls on, mix with our
	fill color
	*/
	if (UV.y <= normalized) {
		if(color.a > 0.4f)
		{
			color.a = 0.1f;
		}
	}
	
	COLOR = color;
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_1vt4l"]
shader = SubResource("Shader_g6oqu")
shader_parameter/min_val = null
shader_parameter/current_val = 0.0
shader_parameter/max_val = 10.0

[sub_resource type="AtlasTexture" id="AtlasTexture_7eotl"]
atlas = ExtResource("19_dllgi")
region = Rect2(0, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_qo17i"]
atlas = ExtResource("19_dllgi")
region = Rect2(128, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_86i1c"]
atlas = ExtResource("19_dllgi")
region = Rect2(256, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_ipsox"]
atlas = ExtResource("19_dllgi")
region = Rect2(384, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_lsyru"]
atlas = ExtResource("20_l3r3b")
region = Rect2(0, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_vbgj2"]
atlas = ExtResource("22_ukfqp")
region = Rect2(0, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_4xids"]
atlas = ExtResource("22_0ntd1")
region = Rect2(0, 0, 136, 136)

[sub_resource type="SpriteFrames" id="SpriteFrames_4u277"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("22_pdqil")
}, {
"duration": 1.0,
"texture": ExtResource("22_pdqil")
}, {
"duration": 1.0,
"texture": ExtResource("22_pdqil")
}, {
"duration": 1.0,
"texture": ExtResource("22_pdqil")
}],
"loop": true,
"name": &"Compliment",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("23_r513t")
}, {
"duration": 1.0,
"texture": ExtResource("23_r513t")
}, {
"duration": 1.0,
"texture": ExtResource("23_r513t")
}, {
"duration": 1.0,
"texture": ExtResource("23_r513t")
}],
"loop": true,
"name": &"FearDeath",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("24_t04sq")
}, {
"duration": 1.0,
"texture": ExtResource("24_t04sq")
}, {
"duration": 1.0,
"texture": ExtResource("24_t04sq")
}, {
"duration": 1.0,
"texture": ExtResource("24_t04sq")
}],
"loop": true,
"name": &"FearDeath2",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_7eotl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qo17i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_86i1c")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ipsox")
}],
"loop": true,
"name": &"Idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("24_7ii7x")
}, {
"duration": 1.0,
"texture": ExtResource("24_7ii7x")
}, {
"duration": 1.0,
"texture": ExtResource("24_7ii7x")
}, {
"duration": 1.0,
"texture": ExtResource("24_7ii7x")
}],
"loop": true,
"name": &"InnerThoughts",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("25_ka4jr")
}, {
"duration": 1.0,
"texture": ExtResource("25_ka4jr")
}, {
"duration": 1.0,
"texture": ExtResource("25_ka4jr")
}, {
"duration": 1.0,
"texture": ExtResource("25_ka4jr")
}],
"loop": true,
"name": &"InnerThoughts2",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_lsyru")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lsyru")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lsyru")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lsyru")
}],
"loop": true,
"name": &"ListenMusic",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_vbgj2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vbgj2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vbgj2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vbgj2")
}],
"loop": true,
"name": &"LookOutWindow",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("28_pkvg3")
}, {
"duration": 1.0,
"texture": ExtResource("28_pkvg3")
}, {
"duration": 1.0,
"texture": ExtResource("28_pkvg3")
}, {
"duration": 1.0,
"texture": ExtResource("28_pkvg3")
}],
"loop": true,
"name": &"Overwhelmed",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("28_pkvg3")
}, {
"duration": 1.0,
"texture": ExtResource("28_pkvg3")
}, {
"duration": 1.0,
"texture": ExtResource("28_pkvg3")
}, {
"duration": 1.0,
"texture": ExtResource("28_pkvg3")
}],
"loop": true,
"name": &"Overwhelmed2",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4xids")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4xids")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4xids")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4xids")
}],
"loop": true,
"name": &"PlayWaxHeads",
"speed": 5.0
}]

[node name="world" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1
script = ExtResource("1_6xk3g")

[node name="Screen" type="Sprite2D" parent="."]
position = Vector2(254, 278)
texture = ExtResource("1_plqb4")

[node name="Panel" type="Panel" parent="."]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = -1
anchor_left = 0.158
anchor_top = 0.227
anchor_right = 0.852
anchor_bottom = 0.698
offset_top = -0.200012
offset_right = -3.05176e-05
offset_bottom = 0.199982
grow_horizontal = 2
grow_vertical = 2

[node name="StateMenu" type="HBoxContainer" parent="Panel"]
unique_name_in_owner = true
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -100.0
offset_right = 100.0
offset_bottom = 64.0
grow_horizontal = 2
theme_override_constants/separation = 20
script = ExtResource("3_hysu4")

[node name="InnerThoughts" type="TextureRect" parent="Panel/StateMenu"]
material = SubResource("ShaderMaterial_nqr0b")
layout_mode = 2
texture = ExtResource("2_ufgsa")

[node name="Overwhelmed" type="TextureRect" parent="Panel/StateMenu"]
material = SubResource("ShaderMaterial_nd57g")
layout_mode = 2
texture = ExtResource("3_48uuk")

[node name="FearDeath" type="TextureRect" parent="Panel/StateMenu"]
material = SubResource("ShaderMaterial_1vt4l")
layout_mode = 2
texture = ExtResource("4_8u0cd")

[node name="ActionMenu" type="HBoxContainer" parent="Panel"]
unique_name_in_owner = true
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -116.0
offset_top = -64.0
offset_right = 116.0
grow_horizontal = 2
grow_vertical = 0
theme_override_constants/separation = 20
script = ExtResource("6_p1swq")

[node name="PlayWaxHeads" type="TextureRect" parent="Panel/ActionMenu"]
self_modulate = Color(1, 1, 1, 0.498039)
layout_mode = 2
texture = ExtResource("6_ykrpd")

[node name="LookOutWindow" type="TextureRect" parent="Panel/ActionMenu"]
self_modulate = Color(1, 1, 1, 0.498039)
layout_mode = 2
texture = ExtResource("7_in6r8")

[node name="ListenMusic" type="TextureRect" parent="Panel/ActionMenu"]
self_modulate = Color(1, 1, 1, 0.498039)
layout_mode = 2
texture = ExtResource("8_vvdv8")

[node name="Compliment" type="TextureRect" parent="Panel/ActionMenu"]
self_modulate = Color(1, 1, 1, 0.498039)
layout_mode = 2
texture = ExtResource("12_2joox")

[node name="Body" type="Sprite2D" parent="."]
position = Vector2(252, 297)
texture = ExtResource("2_lv3vw")

[node name="Select" type="TextureButton" parent="."]
layout_mode = 0
offset_left = 218.0
offset_top = 471.0
offset_right = 293.0
offset_bottom = 558.0
texture_normal = ExtResource("3_o1wkp")
texture_pressed = ExtResource("4_yorv4")

[node name="Right" type="TextureButton" parent="."]
layout_mode = 0
offset_left = 347.0
offset_top = 455.0
offset_right = 422.0
offset_bottom = 542.0
texture_normal = ExtResource("6_1xujt")
texture_pressed = ExtResource("7_q3rti")

[node name="Left" type="TextureButton" parent="."]
layout_mode = 0
offset_left = 91.0
offset_top = 453.0
offset_right = 166.0
offset_bottom = 540.0
texture_normal = ExtResource("8_mfe73")
texture_pressed = ExtResource("9_gf4wo")

[node name="Resize" type="TextureButton" parent="."]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -55.0
offset_bottom = 55.0
grow_horizontal = 0
size_flags_horizontal = 8
size_flags_vertical = 0
texture_normal = ExtResource("6_xv50p")
script = ExtResource("7_ci1wg")

[node name="Existentialgotchi" type="AnimatedSprite2D" parent="."]
unique_name_in_owner = true
position = Vector2(246, 279)
sprite_frames = SubResource("SpriteFrames_4u277")
animation = &"Idle"
autoplay = "Idle"
script = ExtResource("20_iy2gj")

[connection signal="states_updated" from="Panel/StateMenu" to="." method="_on_states_updated"]
[connection signal="do_action" from="Panel/ActionMenu" to="." method="_on_action_menu_do_action"]
[connection signal="pressed" from="Select" to="." method="_on_select_pressed"]
[connection signal="pressed" from="Right" to="." method="_on_right_pressed"]
[connection signal="pressed" from="Left" to="." method="_on_left_pressed"]
